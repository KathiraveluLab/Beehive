{% extends "base.html" %}

{% block content %}
<h2>Login</h2>
<form method="POST" action="{{ url_for('login') }}">
    <div>
        <label for="username">Username</label>
        <input type="text" id="username" name="username" placeholder="Username" required>
    </div>

    <div style="position: relative;">
        <label for="password">Password</label>
        <input type="password" id="password" name="password" placeholder="Password" required>
        <span id="togglePassword" style="position: absolute; right: 10px; top: 30px; cursor: pointer; font-size: 20px; user-select: none;">üëÅÔ∏è</span>
    </div>
    
    <div style="display: inline-flex; align-items: center; gap: 5px; white-space: nowrap; margin-bottom: 10px;">
      <label for="remember_me" style="margin: 0;">Remember Me</label>
      <input type="checkbox" id="remember_me" name="remember_me" style="margin: 0;">
    </div>  
    
    <button type="submit">Login</button>
    <div style="margin-top: 10px;">
      <a href="{{ url_for('forgot_password') }}">Forgot Password?</a>
    </div>
</form>

<div class="google-signin">
    <p>Or</p>
    <a href="{{ url_for('login_google') }}">
        <button class="google-button">
            <span class="google-button-text">Sign in with Google</span>
        </button>
    </a>
</div>

<p>Don't have an account? <a href="{{ url_for('register') }}">Register here</a></p>
<p>If you're admin, <a href="{{ url_for('signingoogle') }}">Sign in here.</a></p>

<script>
    document.addEventListener('DOMContentLoaded', function() {
      const togglePassword = document.getElementById('togglePassword');
      const passwordInput = document.getElementById('password');
  
      if (togglePassword && passwordInput) {
        console.log('Toggle password elements found');
  
        togglePassword.addEventListener('click', function() {
          console.log('Toggle clicked');
  
          const type = passwordInput.getAttribute('type') === 'password' ? 'text' : 'password';
          passwordInput.setAttribute('type', type);
  
          this.textContent = type === 'password' ? 'üëÅÔ∏è' : 'üëÅÔ∏è‚Äçüó®Ô∏è';
        });
      } else {
        console.log('Toggle password elements not found');
      }
      
      // Auto-check "Remember Me" for mobile users
      const rememberMeCheckbox = document.getElementById('remember_me');
      if (rememberMeCheckbox && (/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent))) {
        rememberMeCheckbox.checked = true;
      }
    });
  </script>
  
{% endblock %}